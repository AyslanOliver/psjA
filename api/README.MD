
# API do Sistema de Delivery

API completa para sistema de delivery desenvolvida em Node.js + Express + MongoDB.

## üöÄ Caracter√≠sticas

- **CRUD completo** para pedidos, produtos, clientes e entregadores
- **Autentica√ß√£o JWT** para seguran√ßa
- **Relat√≥rios detalhados** de vendas e performance
- **Configura√ß√µes flex√≠veis** do sistema
- **Valida√ß√µes robustas** de dados
- **Pagina√ß√£o** em todas as listagens
- **Filtros avan√ßados** de busca
- **Estat√≠sticas em tempo real**

## üì¶ Instala√ß√£o Local

```bash
# Clone o reposit√≥rio
git clone <seu-repositorio>
cd api

# Instale as depend√™ncias
npm install

# Configure as vari√°veis de ambiente
cp .env.example .env
# Edite o arquivo .env com suas configura√ß√µes

# Execute em desenvolvimento
npm run dev

# Execute em produ√ß√£o
npm start
```

## üåê Deploy no Render (GRATUITO)

### 1. Prepara√ß√£o

1. Fa√ßa upload do c√≥digo para GitHub
2. Acesse [render.com](https://render.com) e crie uma conta
3. Conecte sua conta GitHub

### 2. Configura√ß√£o do Banco MongoDB

**Op√ß√£o 1: MongoDB Atlas (Recomendado - Gratuito)**
1. Acesse [mongodb.com/atlas](https://mongodb.com/atlas)
2. Crie conta gratuita (512MB gr√°tis)
3. Crie cluster gratuito
4. Configure usu√°rio e senha
5. Obtenha string de conex√£o

**Op√ß√£o 2: MongoDB no Render**
1. No Render, crie novo servi√ßo PostgreSQL (ou use MongoDB externo)

### 3. Deploy da API

1. No Render, clique "New +" ‚Üí "Web Service"
2. Conecte seu reposit√≥rio GitHub
3. Configure:
   - **Name**: `delivery-api`
   - **Environment**: `Node`
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`
   - **Plan**: Free

4. Adicione vari√°veis de ambiente:
   ```
   NODE_ENV=production
   MONGODB_URI=sua_string_mongodb_atlas
   JWT_SECRET=sua_chave_secreta_forte
   FRONTEND_URL=https://seu-frontend.vercel.app
   ```

5. Clique "Create Web Service"

### 4. Configura√ß√£o Final

Ap√≥s deploy, sua API estar√° dispon√≠vel em:
```
https://delivery-api-xxx.onrender.com
```

## üîß Configura√ß√£o do Frontend

No seu frontend React, configure a URL da API:

```typescript
// src/config/api.ts
const API_BASE_URL = process.env.NODE_ENV === 'production' 
  ? 'https://delivery-api-xxx.onrender.com/api'
  : 'http://localhost:3001/api';

export default API_BASE_URL;
```

## üìö Endpoints da API

### Autentica√ß√£o
- `POST /api/auth/login` - Login do usu√°rio
- `GET /api/auth/verify` - Verificar token

### Pedidos
- `GET /api/pedidos` - Listar pedidos
- `POST /api/pedidos` - Criar pedido
- `GET /api/pedidos/:id` - Buscar pedido
- `PATCH /api/pedidos/:id/status` - Atualizar status
- `DELETE /api/pedidos/:id` - Deletar pedido

### Produtos
- `GET /api/produtos` - Listar produtos
- `POST /api/produtos` - Criar produto
- `PUT /api/produtos/:id` - Atualizar produto
- `DELETE /api/produtos/:id` - Deletar produto

### Clientes
- `GET /api/clientes` - Listar clientes
- `POST /api/clientes` - Criar cliente
- `PUT /api/clientes/:id` - Atualizar cliente
- `DELETE /api/clientes/:id` - Deletar cliente

### Entregadores
- `GET /api/entregadores` - Listar entregadores
- `POST /api/entregadores` - Criar entregador
- `PUT /api/entregadores/:id` - Atualizar entregador
- `PATCH /api/entregadores/:id/status` - Alterar status

### Relat√≥rios
- `GET /api/relatorios/vendas` - Relat√≥rio de vendas
- `GET /api/relatorios/produtos-vendidos` - Produtos mais vendidos
- `GET /api/relatorios/clientes` - Relat√≥rio de clientes
- `GET /api/relatorios/dashboard` - Dashboard resumo

### Configura√ß√µes
- `GET /api/configuracoes` - Buscar configura√ß√µes
- `PUT /api/configuracoes` - Atualizar configura√ß√µes

## üîê Autentica√ß√£o

Todas as rotas (exceto login) requerem token JWT:

```javascript
headers: {
  'Authorization': `Bearer ${token}`
}
```

**Usu√°rio padr√£o:**
- Email: `admin@delivery.com`
- Senha: `password`

## üí° Alternativas Gratuitas ao Render

### 1. **Railway** (Recomendado)
- 500 horas gr√°tis/m√™s
- Deploy autom√°tico via GitHub
- PostgreSQL gratuito inclu√≠do

### 2. **Vercel** (Para APIs simples)
- Unlimited deployments
- Serverless functions
- Ideal para Next.js API routes

### 3. **Heroku**
- 550 horas gr√°tis/m√™s
- Postgres gratuito (10k rows)
- Dorme ap√≥s 30min inativo

### 4. **Cyclic**
- Unlimited apps
- Deploy via GitHub
- DynamoDB gratuito

### 5. **Fly.io**
- 2,340 horas gr√°tis/m√™s
- 3GB storage gratuito
- Deploy via Docker

## üì± Pr√≥ximos Passos

1. **Deploy da API no Render**
2. **Configurar MongoDB Atlas**
3. **Atualizar frontend para usar API**
4. **Testar todas as funcionalidades**
5. **Configurar dom√≠nio personalizado (opcional)**

## üõ†Ô∏è Tecnologias Utilizadas

- **Node.js** - Runtime JavaScript
- **Express** - Framework web
- **MongoDB** - Banco de dados NoSQL
- **Mongoose** - ODM para MongoDB
- **JWT** - Autentica√ß√£o
- **bcryptjs** - Hash de senhas
- **Helmet** - Seguran√ßa
- **CORS** - Cross-origin requests

## üìû Suporte

Para d√∫vidas sobre deploy ou configura√ß√£o, consulte:
- [Documenta√ß√£o do Render](https://render.com/docs)
- [MongoDB Atlas Docs](https://docs.atlas.mongodb.com/)
- [Express.js Guide](https://expressjs.com/en/guide/)
